<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã­ã“ãƒãƒˆãƒ«ãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- è¿½åŠ : æ”»æ’ƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆ --- */
        .hit-effect {
            position: absolute;
            font-size: 2em;
            color: red;
            font-weight: bold;
            animation: hitAnim 0.6s ease-out forwards;
            pointer-events: none;
        }

        @keyframes hitAnim {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-40px); opacity: 0; }
        }

        .flash-correct {
            animation: flashCorrect 0.4s;
        }

        @keyframes flashCorrect {
            0% { box-shadow: 0 0 20px 5px yellow; }
            100% { box-shadow: none; }
        }
    </style>
</head>
<body>
    <h1>ã­ã“ãƒãƒˆãƒ«ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h1>
    <!-- æ—¢å­˜ã®HTMLã¯ãã®ã¾ã¾ -->
    <div id="modeSelectScreen">
        <h2>ãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã­ï¼</h2>
        <button id="grade1ModeBtn" class="mode-btn">ğŸ’ ã—ã‚‡ã†ãŒãï¼‘ã­ã‚“ã›ã„</button>
        <button id="grade4ModeBtn" class="mode-btn">ğŸ“š ã—ã‚‡ã†ãŒãï¼”ã­ã‚“ã›ã„</button>
    </div>

    <div id="battleScreen">
        <div id="enemyArea" class="character-area">
            <div class="character-info"> <span class="character-name" id="enemyName"></span> <span class="character-hp-text">HP: <span id="enemyHPText"></span></span> </div>
            <div class="hp-bar-container"> <div class="hp-bar" id="enemyHPBar"></div> </div>
            <div class="character-display" id="enemyCharacter"></div>
        </div>
        <div id="questionArea">
            <div id="question"></div> <div id="answerChoices"></div>
        </div>
        <div id="playerArea" class="character-area">
            <div class="character-display" id="playerCharacter">ğŸ˜º</div>
            <div class="hp-bar-container"> <div class="hp-bar" id="playerHPBar"></div> </div>
            <div class="character-info"> <span class="character-name">ã«ã‚ƒã‚“ãŸã‚ã†</span> <span class="character-hp-text">HP: <span id="playerHPText"></span></span> </div>
        </div>
        <div id="infoArea">
            <div id="battleLog"></div> <button id="startBtn"></button>
        </div>
    </div>

    <!-- è¿½åŠ : åŠ¹æœéŸ³ -->
    <audio id="soundCorrect" src="https://cdn.pixabay.com/audio/2022/03/15/audio_d566a35b25.mp3"></audio>
    <audio id="soundWrong" src="https://cdn.pixabay.com/audio/2022/03/15/audio_8cc421f412.mp3"></audio>
    <audio id="soundHit" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5f3a52ae1a.mp3"></audio>

    <script>
      // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¿½åŠ é–¢æ•°
      function showHitEffect(targetElement, damage) {
        const effect = document.createElement('div');
        effect.className = 'hit-effect';
        effect.textContent = `-${damage}`;
        document.body.appendChild(effect);
        const rect = targetElement.getBoundingClientRect();
        effect.style.left = rect.left + rect.width / 2 + 'px';
        effect.style.top = rect.top - 10 + 'px';
        setTimeout(() => effect.remove(), 600);
      }

      function playSound(id) {
        const audio = document.getElementById(id);
        if (audio) {
          audio.currentTime = 0;
          audio.play();
        }
      }

      // å…ƒã® handleAnswer é–¢æ•°ã®ä¸­ã«ä»¥ä¸‹ã‚’çµ±åˆï¼ˆä¾‹ç¤ºï¼‰:
      // if (selectedAnswer === p.a) {
      //   playSound('soundCorrect');
      //   showHitEffect(enemyCharacter, damageToEnemy);
      //   enemyCharacter.classList.add('flash-correct');
      //   setTimeout(() => enemyCharacter.classList.remove('flash-correct'), 400);
      // } else {
      //   playSound('soundWrong');
      //   showHitEffect(playerCharacter, damageToPlayer);
      // }

      // â€»ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆéƒ¨åˆ†ã®å†…å®¹ã‚’ handleAnswer é–¢æ•°ã«çµ„ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚
    </script>
</body>
</html>
